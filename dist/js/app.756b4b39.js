(function(){"use strict";var e={2365:function(e,n,t){var o=t(9242),a=t(3396),i=t(7718),l=t(9271);function r(e,n,t,o,r,u){const c=(0,a.up)("Main");return(0,a.wg)(),(0,a.j4)(i.q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l.O,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c)])),_:1})])),_:1})}var u=t(7139),c=t(525),s=t(3289);const d=e=>((0,a.dD)("data-v-e6865b42"),e=e(),(0,a.Cn)(),e),f={class:"container"},v=d((()=>(0,a._)("div",{class:"top_title"},[(0,a._)("div",null,"BLUETOOTH STOP WATCH")],-1))),p={class:"top_panel"},_={class:"top_left_panel"},m={class:"top_right_panel"},b={class:"top_right_sub_panel"},w=d((()=>(0,a._)("div",{class:"top_right_sub_label"},[(0,a._)("div",null,"LAP 1")],-1))),g={class:"top_right_sub_time"},k={class:"top_right_sub_panel"},T=d((()=>(0,a._)("div",{class:"top_right_sub_label"},[(0,a._)("div",null,"LAP 2")],-1))),h={class:"top_right_sub_time"},U={class:"middle_buttons"},S={class:"runner_panel"},D={class:"runner_panel_left"},y={class:"runner_name"},O={class:"runner_times_container"},C={class:"runner_times_no"},R={class:"runner_times_info"},L=d((()=>(0,a._)("span",{class:"runner_times_label"},"LAP1",-1))),A=d((()=>(0,a._)("span",{class:"runner_times_label"},"LAP2",-1))),j=d((()=>(0,a._)("span",{class:"runner_times_label"},"START",-1))),W=d((()=>(0,a._)("span",{class:"runner_times_label"},"FINISH",-1))),x={class:"runner_panel_right"},E={class:"footer_buttons"};function I(e,n,t,i,l,r){return(0,a.wg)(),(0,a.iD)("div",f,[v,(0,a._)("div",p,[(0,a._)("div",_,[(0,a._)("div",null,(0,u.zw)(r.currentTime),1)]),(0,a._)("div",m,[(0,a._)("div",b,[w,(0,a._)("div",g,[(0,a._)("div",null,(0,u.zw)(r.lap1Time),1)])]),(0,a._)("div",k,[T,(0,a._)("div",h,[(0,a._)("div",null,(0,u.zw)(r.lap2Time),1)])])])]),(0,a._)("div",U,[(0,a.Wm)(c.T,{variant:"outlined",color:"black",onClick:i.onTimerStart,disabled:"initial"!==i.timerStatus},{default:(0,a.w5)((()=>[(0,a.Uk)("START")])),_:1},8,["onClick","disabled"]),(0,a.Wm)(c.T,{variant:"outlined",color:"black",onClick:i.onTimerLap1,disabled:"start"!==i.timerStatus},{default:(0,a.w5)((()=>[(0,a.Uk)("LAP1")])),_:1},8,["onClick","disabled"]),(0,a.Wm)(c.T,{variant:"outlined",color:"black",onClick:i.onTimerLap2,disabled:"lap1"!==i.timerStatus},{default:(0,a.w5)((()=>[(0,a.Uk)("LAP2")])),_:1},8,["onClick","disabled"]),(0,a.Wm)(c.T,{variant:"outlined",color:"black",onClick:i.onTimerStop,disabled:"start"!==i.timerStatus&&"lap1"!==i.timerStatus&&"lap2"!==i.timerStatus},{default:(0,a.w5)((()=>[(0,a.Uk)("STOP")])),_:1},8,["onClick","disabled"]),(0,a.Wm)(c.T,{variant:"outlined",color:"black",onClick:i.onTimerReset,disabled:"stop"!==i.timerStatus},{default:(0,a.w5)((()=>[(0,a.Uk)("RESET")])),_:1},8,["onClick","disabled"])]),(0,a._)("div",S,[(0,a._)("div",D,[(0,a._)("div",y,(0,u.zw)(i.currentRunner.name),1),(0,a._)("div",O,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.currentRunner.data,((e,n)=>((0,a.wg)(),(0,a.iD)("div",{class:"runner_times",key:n},[(0,a._)("div",C," ["+(0,u.zw)(n+1)+"] ",1),(0,a._)("div",R,[(0,a._)("div",null,[(0,a.Uk)((0,u.zw)(e.time),1),L,(0,a.Uk)((0,u.zw)(e.lap1),1),A,(0,a.Uk)((0,u.zw)(e.lap2),1)]),(0,a._)("div",null,[j,(0,a.Uk)((0,u.zw)(e.startTimestamp),1)]),(0,a._)("div",null,[W,(0,a.Uk)((0,u.zw)(e.goalTimestamp),1)])])])))),128))])]),(0,a._)("div",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.runnerList,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.number},[(0,a.Wm)(c.T,{class:(0,u.C_)({"active-runner":i.currentRunner===e}),onClick:n=>i.onSelectRunner(e)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.name),1)])),_:2},1032,["class","onClick"])])))),128)),(0,a._)("div",null,[(0,a.Wm)(c.T,{color:"red",onClick:i.onAddRunner},{default:(0,a.w5)((()=>[(0,a.Wm)(s.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])])]),(0,a._)("div",E,[(0,a.wy)((0,a.Wm)(c.T,{class:"flex-grow-1",onClick:i.onRequestDevice},{default:(0,a.w5)((()=>[(0,a.Wm)(s.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-bluetooth")])),_:1}),(0,a.Uk)("ON")])),_:1},8,["onClick"]),[[o.F8,"disconnected"===i.bleStatus]]),(0,a.wy)((0,a.Wm)(c.T,{class:"flex-grow-1",onClick:i.onDisconnect},{default:(0,a.w5)((()=>[(0,a.Wm)(s.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-bluetooth-off")])),_:1}),(0,a.Uk)("OFF")])),_:1},8,["onClick"]),[[o.F8,"connected"===i.bleStatus]]),(0,a.Wm)(c.T,{class:"flex-grow-1",onClick:i.onClearData},{default:(0,a.w5)((()=>[(0,a.Uk)("CLEAR")])),_:1},8,["onClick"]),(0,a.Wm)(c.T,{class:"flex-grow-1",onClick:i.onDownloadData},{default:(0,a.w5)((()=>[(0,a.Uk)("DOWNLOAD")])),_:1},8,["onClick"])])])}t(7658),t(3767),t(8585),t(8696);var P=t(4870);const H=new BlueJelly;var F={name:"HelloWorld",setup(){const e=(0,P.iH)(""),n=(0,P.iH)("disconnected"),t=(0,P.iH)("initial"),o=(0,P.iH)(0),a=(0,P.iH)(0),i=(0,P.iH)(0),l=(0,P.iH)(""),r=(0,P.iH)(""),u=(0,P.iH)([]),c=(0,P.iH)(null);H.setUUID("UUID1","1b24e5c4-a39c-4d46-92fb-3bbcb2f34a41","9d18d524-2a6e-44ce-8724-445575b23e9a"),H.onRead=function(n,t){if("UUID1"===t){const t=new TextDecoder("utf-8"),o=t.decode(n);e.value=o;const a=JSON.parse(o);(1&a.sw)>0&&(console.log("RESET_SW1"),m()),(2&a.sw)>0&&(console.log("RESET_SW2"),m()),(1&a.tr)>0&&(console.log("START_TRG"),f()),(2&a.tr)>0&&(console.log("MIDDLE1_TRG"),v()),(4&a.tr)>0&&(console.log("MIDDLE2_TRG"),p()),(8&a.tr)>0&&(console.log("GOAL_TRG"),_())}},H.onScan=function(){H.connectGATT("UUID1")},H.onConnectGATT=function(e){"UUID1"===e&&(n.value="connected",H.startNotify("UUID1"))},H.onDisconnect=function(){n.value="disconnected",e.value=""};let s,d=0;function f(){if(!s){const e=Date.now();t.value="start";const n=d;s=setInterval((()=>{const t=n+Date.now()-e;o.value=t,d=t}),10),l.value=(new Date).toLocaleString()}}function v(){a.value=o.value,t.value="lap1"}function p(){i.value=o.value,t.value="lap2"}function _(){s&&(clearInterval(s),s=void 0,r.value=(new Date).toLocaleString(),t.value="stop",c.value.data.push(w(o.value,a.value,i.value,l.value,r.value)),h())}function m(){_(),o.value=0,a.value=0,i.value=0,d=0,l.value="",r.value="",t.value="initial"}function b(e){return{number:e,name:`Runner${e}`,data:[]}}function w(e,n,t,o,a){return{time:(e/1e3).toFixed(2),lap1:n?(n/1e3).toFixed(2):"",lap2:t?(t/1e3).toFixed(2):"",startTimestamp:o,goalTimestamp:a}}function g(){const e=b(1);u.value=[e],c.value=e,h()}function k(){const e="download.csv",n=u.value.map((e=>e.data.reduce(((e,n)=>(n.lap1&&(e.push(n.lap1),n.lap2&&e.push(n.lap2)),e.push(n.time),e)),[e.name]).join(","))).join("\n"),t=new Uint8Array([239,187,191]),o=new Blob([t,n],{type:"text/csv"});if(navigator.share){const n=new File([o],e,{type:"text/csv"});navigator.share({files:[n]}).then((()=>{console.log("共有成功.")})).catch((e=>{console.log(e)}))}else{const n=(window.URL||window.webkitURL).createObjectURL(o),t=document.createElement("a");t.href=n,t.download=e,t.click(),(window.URL||window.webkitURL).revokeObjectURL(n)}}function T(){const e=JSON.parse(localStorage.getItem("runner"));return!!(e&&e.length>0)&&(u.value=e,c.value=e[0],!0)}function h(){localStorage.setItem("runner",JSON.stringify(u.value))}return T()||g(),{readData:e,bleStatus:n,timerStatus:t,timer:o,lap1:a,lap2:i,start:l,goal:r,runnerList:u,currentRunner:c,onRequestDevice(){H.requestDevice("UUID1")},onConnect(){H.connectGATT("UUID1")},onRead(){H.read("UUID1")},onDisconnect(){H.disconnect()},onTimerStart(){f()},onTimerLap1(){v()},onTimerLap2(){p()},onTimerStop(){_()},onTimerReset(){m()},onAddRunner(){u.value.push(b(u.value.length+1)),h()},onSelectRunner(e){c.value=e},onClearData(){g()},onDownloadData(){k()}}},computed:{currentTime:function(){return(this.timer/1e3).toFixed(2)},lap1Time:function(){return(this.lap1/1e3).toFixed(2)},lap2Time:function(){return(this.lap2/1e3).toFixed(2)}}},z=t(89);const N=(0,z.Z)(F,[["render",I],["__scopeId","data-v-e6865b42"]]);var G=N,M={name:"App",components:{Main:G},data:()=>({})};const q=(0,z.Z)(M,[["render",r]]);var B=q,J=(t(9773),t(8685)),K=(0,J.Rd)();async function Y(){const e=await t.e(461).then(t.t.bind(t,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}Y(),(0,o.ri)(B).use(K).mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,i){if(!o){var l=1/0;for(s=0;s<e.length;s++){o=e[s][0],a=e[s][1],i=e[s][2];for(var r=!0,u=0;u<o.length;u++)(!1&i||l>=i)&&Object.keys(t.O).every((function(e){return t.O[e](o[u])}))?o.splice(u--,1):(r=!1,i<l&&(l=i));if(r){e.splice(s--,1);var c=a();void 0!==c&&(n=c)}}return n}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[o,a,i]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){var e,n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var i=Object.create(null);t.r(i);var l={};e=e||[null,n({}),n([]),n(n)];for(var r=2&a&&o;"object"==typeof r&&!~e.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((function(e){l[e]=function(){return o[e]}}));return l["default"]=function(){return o},t.d(i,l),i}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,o){return t.f[o](e,n),n}),[]))}}(),function(){t.u=function(e){return"js/webfontloader.345a7e32.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="ble-stop-watch:";t.l=function(o,a,i,l){if(e[o])e[o].push(a);else{var r,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var d=c[s];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==n+i){r=d;break}}r||(u=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,t.nc&&r.setAttribute("nonce",t.nc),r.setAttribute("data-webpack",n+i),r.src=o),e[o]=[a];var f=function(n,t){r.onerror=r.onload=null,clearTimeout(v);var a=e[o];if(delete e[o],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((function(e){return e(t)})),n)return n(t)},v=setTimeout(f.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=f.bind(null,r.onerror),r.onload=f.bind(null,r.onload),u&&document.head.appendChild(r)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p=""}(),function(){var e={143:0};t.f.j=function(n,o){var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)o.push(a[2]);else{var i=new Promise((function(t,o){a=e[n]=[t,o]}));o.push(a[2]=i);var l=t.p+t.u(n),r=new Error,u=function(o){if(t.o(e,n)&&(a=e[n],0!==a&&(e[n]=void 0),a)){var i=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;r.message="Loading chunk "+n+" failed.\n("+i+": "+l+")",r.name="ChunkLoadError",r.type=i,r.request=l,a[1](r)}};t.l(l,u,"chunk-"+n,n)}},t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,i,l=o[0],r=o[1],u=o[2],c=0;if(l.some((function(n){return 0!==e[n]}))){for(a in r)t.o(r,a)&&(t.m[a]=r[a]);if(u)var s=u(t)}for(n&&n(o);c<l.length;c++)i=l[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(s)},o=self["webpackChunkble_stop_watch"]=self["webpackChunkble_stop_watch"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(2365)}));o=t.O(o)})();
//# sourceMappingURL=app.756b4b39.js.map