(function(){"use strict";var e={8197:function(e,n,t){var a=t(9242),o=t(3396),l=t(7718),r=t(9271);function i(e,n,t,a,i,u){const c=(0,o.up)("Main"),s=(0,o.up)("app-alert");return(0,o.wg)(),(0,o.j4)(l.q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r.O,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c),(0,o.Wm)(s)])),_:1})])),_:1})}var u=t(7139),c=t(525),s=t(3289);const d=e=>((0,o.dD)("data-v-aa1818aa"),e=e(),(0,o.Cn)(),e),v={class:"container"},f=d((()=>(0,o._)("div",{class:"top_title"},[(0,o._)("div",null,"BLUETOOTH STOPWATCH")],-1))),_={class:"top_panel"},p={class:"top_left_panel"},m={class:"top_right_panel"},w={class:"top_right_sub_panel"},b=d((()=>(0,o._)("div",{class:"top_right_sub_label"},[(0,o._)("div",null,"LAP 1")],-1))),g={class:"top_right_sub_time"},h={class:"top_right_sub_panel"},k=d((()=>(0,o._)("div",{class:"top_right_sub_label"},[(0,o._)("div",null,"LAP 2")],-1))),T={class:"top_right_sub_time"},y={class:"middle_buttons"},U={class:"runner_panel"},C={class:"runner_panel_left"},S={class:"runner_headline"},D={class:"runner_name"},R={class:"runner_delete"},O={class:"runner_times_container"},A={class:"runner_times_no"},L={class:"runner_times_info"},j=d((()=>(0,o._)("span",{class:"runner_times_label"},"LAP1",-1))),W=d((()=>(0,o._)("span",{class:"runner_times_label"},"LAP2",-1))),x=d((()=>(0,o._)("span",{class:"runner_times_label"},"START",-1))),I=d((()=>(0,o._)("span",{class:"runner_times_label"},"FINISH",-1))),E={class:"runner_panel_right"},F={class:"footer_buttons"};function P(e,n,t,l,r,i){return(0,o.wg)(),(0,o.iD)("div",v,[f,(0,o._)("div",_,[(0,o._)("div",p,[(0,o._)("div",null,(0,u.zw)(i.currentTime),1)]),(0,o._)("div",m,[(0,o._)("div",w,[b,(0,o._)("div",g,[(0,o._)("div",null,(0,u.zw)(i.lap1Time),1)])]),(0,o._)("div",h,[k,(0,o._)("div",T,[(0,o._)("div",null,(0,u.zw)(i.lap2Time),1)])])])]),(0,o._)("div",y,[(0,o.Wm)(c.T,{variant:"outlined",color:"black",onClick:l.onTimerStart,disabled:"initial"!==l.timerStatus},{default:(0,o.w5)((()=>[(0,o.Uk)("START")])),_:1},8,["onClick","disabled"]),(0,o.Wm)(c.T,{variant:"outlined",color:"black",onClick:l.onTimerLap1,disabled:"start"!==l.timerStatus},{default:(0,o.w5)((()=>[(0,o.Uk)("LAP1")])),_:1},8,["onClick","disabled"]),(0,o.Wm)(c.T,{variant:"outlined",color:"black",onClick:l.onTimerLap2,disabled:"lap1"!==l.timerStatus},{default:(0,o.w5)((()=>[(0,o.Uk)("LAP2")])),_:1},8,["onClick","disabled"]),(0,o.Wm)(c.T,{variant:"outlined",color:"black",onClick:l.onTimerStop,disabled:"start"!==l.timerStatus&&"lap1"!==l.timerStatus&&"lap2"!==l.timerStatus},{default:(0,o.w5)((()=>[(0,o.Uk)("STOP")])),_:1},8,["onClick","disabled"]),(0,o.Wm)(c.T,{variant:"outlined",color:"black",onClick:l.onTimerReset,disabled:"stop"!==l.timerStatus},{default:(0,o.w5)((()=>[(0,o.Uk)("RESET")])),_:1},8,["onClick","disabled"])]),(0,o._)("div",U,[(0,o._)("div",C,[(0,o._)("div",S,[(0,o._)("div",D,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>l.currentRunner.name=e),onChange:n[1]||(n[1]=(...e)=>l.onChangeRunnerName&&l.onChangeRunnerName(...e))},null,544),[[a.nr,l.currentRunner.name]])]),(0,o._)("div",R,[(0,o.Wm)(c.T,{color:"red",onClick:l.onDeleteRunner},{default:(0,o.w5)((()=>[(0,o.Wm)(s.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-minus")])),_:1})])),_:1},8,["onClick"])])]),(0,o._)("div",O,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.currentRunner.data,((e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"runner_times",key:n},[(0,o._)("div",A," ["+(0,u.zw)(n+1)+"] ",1),(0,o._)("div",L,[(0,o._)("div",null,[(0,o.Uk)((0,u.zw)(e.time),1),j,(0,o.Uk)((0,u.zw)(e.lap1),1),W,(0,o.Uk)((0,u.zw)(e.lap2),1)]),(0,o._)("div",null,[x,(0,o.Uk)((0,u.zw)(e.startTimestamp),1)]),(0,o._)("div",null,[I,(0,o.Uk)((0,u.zw)(e.goalTimestamp),1)])])])))),128))])]),(0,o._)("div",E,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.runnerList,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.number},[(0,o.Wm)(c.T,{class:(0,u.C_)({"active-runner":l.currentRunner===e}),onClick:n=>l.onSelectRunner(e)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(e.name),1)])),_:2},1032,["class","onClick"])])))),128)),(0,o._)("div",null,[(0,o.Wm)(c.T,{color:"red",onClick:l.onAddRunner},{default:(0,o.w5)((()=>[(0,o.Wm)(s.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])])]),(0,o._)("div",F,[(0,o.wy)((0,o.Wm)(c.T,{class:"flex-grow-1",onClick:l.onRequestDevice},{default:(0,o.w5)((()=>[(0,o.Wm)(s.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-bluetooth")])),_:1}),(0,o.Uk)("ON")])),_:1},8,["onClick"]),[[a.F8,"disconnected"===l.bleStatus]]),(0,o.wy)((0,o.Wm)(c.T,{class:"flex-grow-1",onClick:l.onDisconnect},{default:(0,o.w5)((()=>[(0,o.Wm)(s.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-bluetooth-off")])),_:1}),(0,o.Uk)("OFF")])),_:1},8,["onClick"]),[[a.F8,"connected"===l.bleStatus]]),(0,o.Wm)(c.T,{class:"flex-grow-1",onClick:l.onClearData},{default:(0,o.w5)((()=>[(0,o.Uk)("CLEAR")])),_:1},8,["onClick"]),(0,o.Wm)(c.T,{class:"flex-grow-1",onClick:l.onDownloadData},{default:(0,o.w5)((()=>[(0,o.Uk)("DOWNLOAD")])),_:1},8,["onClick"])])])}t(7658),t(3767),t(8585),t(8696);var H=t(4870);const N={class:"app_alert__background"},M={class:"app_alert__container"},z={class:"app_alert__message"},G={class:"app_alert__buttons"};function q(e,n,t,l,r,i){return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",N,[(0,o._)("div",M,[(0,o._)("div",z,(0,u.zw)(l.store.alertMessage),1),(0,o._)("div",G,[(0,o.wy)((0,o.Wm)(c.T,{onClick:l.close,color:"#ccc"},{default:(0,o.w5)((()=>[(0,o.Uk)("閉じる")])),_:1},8,["onClick"]),[[a.F8,"close"===l.store.alertType]]),(0,o.wy)((0,o.Wm)(c.T,{onClick:l.yes,color:"#ccc"},{default:(0,o.w5)((()=>[(0,o.Uk)("はい")])),_:1},8,["onClick"]),[[a.F8,"yes_no"===l.store.alertType]]),(0,o.wy)((0,o.Wm)(c.T,{onClick:l.no,color:"#ccc"},{default:(0,o.w5)((()=>[(0,o.Uk)("いいえ")])),_:1},8,["onClick"]),[[a.F8,"yes_no"===l.store.alertType]])])])],512)),[[a.F8,l.store.isShowAlert]])}const B=(0,H.iH)({isShowAlert:!1,alertMessage:"",alertType:""}),J={resolve:void 0,reject:void 0};var Z={setup(){return{store:B,close(){B.value.isShowAlert=!1,J.resolve&&J.resolve()},yes(){B.value.isShowAlert=!1,J.resolve&&J.resolve()},no(){B.value.isShowAlert=!1,J.reject&&J.reject()}}},show(e,n){return B.value.isShowAlert=!0,B.value.alertMessage=e,B.value.alertType=n,new Promise(((e,n)=>{J.resolve=e,J.reject=n}))}},K=t(89);const V=(0,K.Z)(Z,[["render",q]]);var Y=V;const $=new BlueJelly;var Q={name:"MainVue",setup(){const e=(0,H.iH)(""),n=(0,H.iH)("disconnected"),t=(0,H.iH)("initial"),a=(0,H.iH)(0),o=(0,H.iH)(0),l=(0,H.iH)(0),r=(0,H.iH)(""),i=(0,H.iH)(""),u=(0,H.iH)([]),c=(0,H.iH)(null);$.setUUID("UUID1","1b24e5c4-a39c-4d46-92fb-3bbcb2f34a41","9d18d524-2a6e-44ce-8724-445575b23e9a"),$.onRead=function(n,t){if("UUID1"===t){const t=new TextDecoder("utf-8"),a=t.decode(n);e.value=a;const o=JSON.parse(a);(1&o.sw)>0&&(console.log("RESET_SW1"),m()),(2&o.sw)>0&&(console.log("RESET_SW2"),m()),(1&o.tr)>0&&(console.log("START_TRG"),v()),(2&o.tr)>0&&(console.log("MIDDLE1_TRG"),f()),(4&o.tr)>0&&(console.log("MIDDLE2_TRG"),_()),(8&o.tr)>0&&(console.log("GOAL_TRG"),p())}},$.onScan=function(){$.connectGATT("UUID1")},$.onConnectGATT=function(e){"UUID1"===e&&(n.value="connected",$.startNotify("UUID1"))},$.onDisconnect=function(){n.value="disconnected",e.value=""};let s,d=0;function v(){if(!s){const e=Date.now();t.value="start";const n=d;s=setInterval((()=>{const t=n+Date.now()-e;a.value=t,d=t}),10),r.value=(new Date).toLocaleString()}}function f(){o.value=a.value,t.value="lap1"}function _(){l.value=a.value,t.value="lap2"}function p(){s&&(clearInterval(s),s=void 0,i.value=(new Date).toLocaleString(),t.value="stop",c.value.data.push(b(a.value,o.value,l.value,r.value,i.value)),y())}function m(){p(),a.value=0,o.value=0,l.value=0,d=0,r.value="",i.value="",t.value="initial"}function w(e){return{number:e,name:`Runner${e}`,data:[]}}function b(e,n,t,a,o){return{time:(e/1e3).toFixed(2),lap1:n?(n/1e3).toFixed(2):"",lap2:t?(t/1e3).toFixed(2):"",startTimestamp:a,goalTimestamp:o}}function g(){const e=w(1);u.value=[e],c.value=e,y()}function h(){u.value.map((e=>{e.data=[]})),y()}function k(){const e="download.csv",n=u.value.map((e=>e.data.reduce(((e,n)=>(n.lap1&&(e.push(n.lap1),n.lap2&&e.push(n.lap2)),e.push(n.time),e)),[e.name]).join(","))).join("\n"),t=new Uint8Array([239,187,191]),a=new Blob([t,n],{type:"text/csv"});if(navigator.share){const n=new File([a],e,{type:"text/csv"});navigator.share({files:[n]}).then((()=>{console.log("共有成功.")})).catch((e=>{console.log(e)}))}else{const n=(window.URL||window.webkitURL).createObjectURL(a),t=document.createElement("a");t.href=n,t.download=e,t.click(),(window.URL||window.webkitURL).revokeObjectURL(n)}}function T(){const e=JSON.parse(localStorage.getItem("runner"));return!!(e&&e.length>0)&&(u.value=e,c.value=e[0],!0)}function y(){localStorage.setItem("runner",JSON.stringify(u.value))}return T()||g(),{readData:e,bleStatus:n,timerStatus:t,timer:a,lap1:o,lap2:l,start:r,goal:i,runnerList:u,currentRunner:c,onRequestDevice(){$.requestDevice("UUID1")},onConnect(){$.connectGATT("UUID1")},onRead(){$.read("UUID1")},onDisconnect(){$.disconnect()},onTimerStart(){v()},onTimerLap1(){f()},onTimerLap2(){_()},onTimerStop(){p()},onTimerReset(){m()},onAddRunner(){u.value.push(w(u.value.length+1)),y()},onSelectRunner(e){c.value=e,"stop"===t.value&&m()},async onDeleteRunner(){try{await Y.show("削除します。よろしいですか？","yes_no")}catch(n){return}const e=u.value.findIndex((e=>e===c.value));e<0||(u.value=u.value.filter((e=>e!==c.value)),0===u.value.length?g():u.value.length===e?(c.value=u.value[e-1],y()):(c.value=u.value[e],y()))},onChangeRunnerName(){y()},async onClearData(){try{await Y.show("クリアします。よろしいですか？","yes_no"),h(),m()}catch(e){}},onDownloadData(){k()}}},computed:{currentTime:function(){return(this.timer/1e3).toFixed(2)},lap1Time:function(){return(this.lap1/1e3).toFixed(2)},lap2Time:function(){return(this.lap2/1e3).toFixed(2)}}};const X=(0,K.Z)(Q,[["render",P],["__scopeId","data-v-aa1818aa"]]);var ee=X,ne={name:"App",components:{Main:ee,AppAlert:Y},data:()=>({})};const te=(0,K.Z)(ne,[["render",i]]);var ae=te,oe=(t(9773),t(8685)),le=(0,oe.Rd)();async function re(){const e=await t.e(461).then(t.t.bind(t,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}re(),(0,a.ri)(ae).use(le).mount("#app")}},n={};function t(a){var o=n[a];if(void 0!==o)return o.exports;var l=n[a]={exports:{}};return e[a](l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(n,a,o,l){if(!a){var r=1/0;for(s=0;s<e.length;s++){a=e[s][0],o=e[s][1],l=e[s][2];for(var i=!0,u=0;u<a.length;u++)(!1&l||r>=l)&&Object.keys(t.O).every((function(e){return t.O[e](a[u])}))?a.splice(u--,1):(i=!1,l<r&&(r=l));if(i){e.splice(s--,1);var c=o();void 0!==c&&(n=c)}}return n}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[a,o,l]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){var e,n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(a,o){if(1&o&&(a=this(a)),8&o)return a;if("object"===typeof a&&a){if(4&o&&a.__esModule)return a;if(16&o&&"function"===typeof a.then)return a}var l=Object.create(null);t.r(l);var r={};e=e||[null,n({}),n([]),n(n)];for(var i=2&o&&a;"object"==typeof i&&!~e.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((function(e){r[e]=function(){return a[e]}}));return r["default"]=function(){return a},t.d(l,r),l}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,a){return t.f[a](e,n),n}),[]))}}(),function(){t.u=function(e){return"js/webfontloader.345a7e32.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="ble-stop-watch:";t.l=function(a,o,l,r){if(e[a])e[a].push(o);else{var i,u;if(void 0!==l)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var d=c[s];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==n+l){i=d;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",n+l),i.src=a),e[a]=[o];var v=function(n,t){i.onerror=i.onload=null,clearTimeout(f);var o=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(t)})),n)return n(t)},f=setTimeout(v.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=v.bind(null,i.onerror),i.onload=v.bind(null,i.onload),u&&document.head.appendChild(i)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p=""}(),function(){var e={143:0};t.f.j=function(n,a){var o=t.o(e,n)?e[n]:void 0;if(0!==o)if(o)a.push(o[2]);else{var l=new Promise((function(t,a){o=e[n]=[t,a]}));a.push(o[2]=l);var r=t.p+t.u(n),i=new Error,u=function(a){if(t.o(e,n)&&(o=e[n],0!==o&&(e[n]=void 0),o)){var l=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;i.message="Loading chunk "+n+" failed.\n("+l+": "+r+")",i.name="ChunkLoadError",i.type=l,i.request=r,o[1](i)}};t.l(r,u,"chunk-"+n,n)}},t.O.j=function(n){return 0===e[n]};var n=function(n,a){var o,l,r=a[0],i=a[1],u=a[2],c=0;if(r.some((function(n){return 0!==e[n]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(u)var s=u(t)}for(n&&n(a);c<r.length;c++)l=r[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(s)},a=self["webpackChunkble_stop_watch"]=self["webpackChunkble_stop_watch"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(8197)}));a=t.O(a)})();
//# sourceMappingURL=app.936a7457.js.map